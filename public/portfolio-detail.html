<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Portföy Detayı</title>
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"/>
  <link rel="stylesheet" href="./css/shared-styles.css"/>
  <link rel="stylesheet" href="./css/simple-loading.css"/>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
  <link rel="preconnect" href="https://cdnjs.cloudflare.com" crossorigin>
  <style>
    :root{ --card-radius:16px; }
    body { font-family:'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; color:#333; }
    .page-wrapper { min-height:100vh; padding-top:16px; background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%); }
    .container { max-width: 1400px; }

    /* HERO */
    .hero{ display:flex; gap:24px; align-items:flex-start; }
    .hero-img-wrap{ flex:0 0 auto; width:180px; height:180px; }
    .hero-img{ width:100%; height:100%; object-fit:contain; border-radius:12px; border:1px solid #eee; background:#fff; }
    .hero-meta{ flex:1; min-width:300px; }
    .kv-grid{ display:grid; grid-template-columns:repeat(auto-fit, minmax(200px, 1fr)); gap:10px 20px; }
    .kv-item .label { font-size: 0.85em; color: #666; }
    .kv-item .value { font-weight: 600; font-size: 1.05em; }

    /* İşlem Geçmişi */
    .accordion-transaction-history { border-radius: 12px; overflow: hidden; }
    .transition-icon { transition: transform 0.2s; }
    
    /* Belge İkonları */
    .doc-link-item { font-size: 1.2em; text-decoration: none !important; transition: transform 0.2s; display: inline-block; }
    .doc-link-item:hover { transform: scale(1.2); }
    
    #heroCard { position: relative; }
    #tpQueryBtn {
        position: absolute; bottom: 16px; right: 16px;
        background-color: #b388ff; color: white; border: none;
        padding: 8px 16px; border-radius: 8px;
        box-shadow: 0 4px 10px rgba(0,0,0,0.15);
    }
    #tpQueryBtn:hover { background-color: #9c6bff; }
  </style>
</head>
<body>
  <div id="notification-container" class="notification-container"></div>
  <div id="layout-placeholder"></div>

  <div class="page-wrapper">
    <main class="main-container container">

      <div id="detail-root" class="d-none">

        <div id="heroCard" class="card shadow-sm mb-4 d-none">
          <div class="card-body hero">
            <div class="hero-img-wrap">
              <img id="brandImage" class="hero-img" alt="Marka Görseli" />
            </div>
            <div class="hero-meta">
              <h4 id="heroTitle" class="mb-3 font-weight-bold"></h4>
              <div id="heroKv" class="kv-grid"></div>
            </div>
            <button id="tpQueryBtn" class="btn btn-sm" style="display:none">
              TÜRKPATENT’te Sorgula
            </button>
          </div>
        </div>

        <div class="card shadow-sm mb-4">
          <div class="card-body">
            <div class="form-row">
              <div class="form-group col-md-6">
                <label class="text-muted small">Başvuru Sahibi</label>
                <div id="applicantName" class="form-control h-auto" style="min-height: 38px; background-color: #e9ecef; overflow-y: auto;"></div>
              </div>
              <div class="form-group col-md-6">
                <label class="text-muted small">Başvuru Sahibi Adresi</label>
                <div id="applicantAddress" class="form-control h-auto" style="min-height: 38px; background-color: #e9ecef; overflow-y: auto;"></div>
              </div>
            </div>
          </div>
        </div>

        <div class="card shadow-sm mb-4">
          <div class="card-header bg-white font-weight-bold">Eşya Listesi</div>
          <div class="card-body" id="goodsContainer"></div>
        </div>

        <div class="card shadow-sm mb-4">
          <div class="card-header bg-white d-flex justify-content-between align-items-center">
            <strong class="text-primary">İşlem Geçmişi</strong>
            </div>
          <div class="card-body p-0">
             <div id="txAccordion" class="accordion-transaction-history"></div>
          </div>
        </div>

        <div class="card shadow-sm mb-4">
          <div class="card-header bg-white d-flex justify-content-between align-items-center">
            <strong>Ekli Belgeler</strong>
            <div>
              <button id="addDocToggleBtn" class="btn btn-sm btn-outline-primary">Belge Ekle</button>
              <span id="docCount" class="badge badge-secondary ml-2">0</span>
            </div>
          </div>
          
          <div id="addDocForm" class="p-4 bg-light border-bottom d-none">
            <div class="form-row">
              <div class="form-group col-md-4">
                <label>Belge Adı</label>
                <input id="docName" class="form-control" placeholder="Örn: Vekaletname">
              </div>
              <div class="form-group col-md-4">
                <label>Dosya Seç</label>
                <input id="docFile" type="file" class="form-control-file">
              </div>
              <div class="form-group col-md-4">
                <label>Tür</label>
                <select id="docType" class="form-control">
                  <option value="evidence">Kullanım Delili</option>
                  <option value="other">Diğer</option>
                  <option value="official">Resmi Yazı</option>
                </select>
              </div>
            </div>
            <div class="text-right">
              <button id="docSaveBtn" class="btn btn-success btn-sm">Kaydet</button>
              <button id="docCancelBtn" class="btn btn-secondary btn-sm">İptal</button>
            </div>
          </div>

          <div class="card-body p-0">
            <div class="table-responsive">
              <table class="table table-hover mb-0">
                <thead class="bg-light">
                  <tr>
                    <th>Ad</th>
                    <th>Tür</th>
                    <th>Yol/URL</th>
                    <th class="text-right">İşlemler</th>
                  </tr>
                </thead>
                <tbody id="documentsTbody"></tbody>
              </table>
            </div>
          </div>
        </div>

      </div>
    </main>
  </div>

  <script type="module" src="./js/portfolio/PortfolioDetailManager.js"></script>
</body>
</html>